# name: Deploy Node.js Application to EC2

# on:
#   push:
#     branches:
#       - main

# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v2

#       - name: Install SSH key
#         uses: shimataro/ssh-key-action@v2
#         with:
#           key: ${{ secrets.EC2_SSH_PRIVATE_KEY }}
#           known_hosts: ${{ secrets.KNOWN_HOSTS }}

#       - name: Deploy to EC2
#         env:
#           HOST: ${{ secrets.EC2_HOST }}
#           USER: ${{ secrets.EC2_USER }}
#         run: |
#           ssh $USER@$HOST << EOF
#             cd ~/LMS-test-server
#             git pull origin main
#             npm install
#             npm run build
#             pm2 restart ecosystem.config.js
#           EOF
